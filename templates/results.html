<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript">// <![CDATA[
        function loading(){
            $("#loading").show();
            $("#content").hide();       
        }
// ]]>
</script>
<style>
</style>
</head>
{% extends 'base.html' %}
{% block title %}HH Parcer - Flask{% endblock %}
{% block content %}

<div id="controls" class="row justify-content-between">
    <div id="input" class="col">
        <form method="POST" action ="/">
            <div class="form-group">
                <label for="vacancy">Название вакансии:</label>
                <input type="text" class ="form-control" name="vacancy" value="{{req}}">
            </div>
            <button type="submit" class="btn btn-primary mt-3" onclick="loading();">Искать</button>
        </form>
		
    </div>
    <div id="clear" class="col">
    <form action="/clear/" method="post">
        <button id="clearBtn" name="clearBtn" type="submit" class="btn btn-primary mt-3">Очистить результаты</button>
    </form>
    </div>
</div>
<div class="d-flex align-items-center justify-content-center">
	<div id="loading">
		<img src='/static/loading.gif'/>
	</div>
</div>

<h5>Выгрузка по запросу "{{req}}"</h5>
<div class="row">
	<div class="col-7 bg-light p-3 border">
		<table>
			<tr>
			<th>ID</th>
			<th>Имя вакансии</th>
			<th>Город</th>
			<th>Ссылка</th>
			<th>Работодатель</th>
			<th>ЗП (руб., Gross)</th>
			</tr>
				{%for index, row in vacancies_table.iterrows() %}
				<tr>
				<td>
				{{row['vac_id']}}
				</td>
				<td style="width:25%;">
				{{row['name']}}
				</td>
				<td style="width:10%;">
				{{row['area']}}
				</td>
				<td>
				{{row['url']}}
				</td>
				<td>
				{{row['employer']}}
				</td>
				<td>
				{{row['salary_gross_RUR']}}
				</td>
				</tr>
				{%endfor %}
		</table>
	</div>
	
	<div class="bd-placeholder-img col-md-5 float-md-end">
	<img style="display:block; width:100%;" src="{{hist_img_path}}"/>
	</div>
	
</div>
{% endblock %}